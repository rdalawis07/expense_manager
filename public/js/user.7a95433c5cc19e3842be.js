(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{K1xf:function(e,t,s){"use strict";s.r(t);var a={data:function(){return{isFormValid:!1,moment:moment,isVisibleControl:!0,dialog:!1,search:"",roleList:[],userList:[],isCreate:!1,items:[{text:"User Management",disabled:!1},{text:"Users",disabled:!1}],headers:[{text:"Name",align:"left",value:"name",sortable:!0},{text:"Email",align:"left",value:"email",sortable:!0},{text:"Password",align:"left",value:"password",sortable:!0},{text:"Role",align:"left",value:"role_name",sortable:!0},{text:"Created At",align:"left",value:"created_at",sortable:!0}],userObj:{id:null,password:null,name:null,email:null,role_id:null,role_name:null},rules:{required:function(e){return!!e||"Required."},email:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."}}}},created:function(){this.fetchRole(),this.fetchUsers()},methods:{fetchRole:function(){var e=this;this.roleList=[],this.$axios({method:"get",url:"/api/roles"}).then((function(t){t.data.length>0&&(e.roleList=t.data)})).catch((function(t){e.$swal.fire("Failed","Something went wrong. Please check your connection.","error")}))},fetchUsers:function(){var e=this;this.$store.dispatch("app/changeLoading",!0),this.userList=[],this.$axios({method:"get",url:"/api/users"}).then((function(t){t.data.length>0?e.userList=t.data:e.$swal.fire("Warning","No Data Found.","warning"),e.$store.dispatch("app/changeLoading",!1)})).catch((function(t){e.$swal.fire("Failed","Something went wrong. Please check your connection.","error"),e.$store.dispatch("app/changeLoading",!1)}))},create:function(){this.isCreate=!0,this.userObj.id=null,this.userObj.name=null,this.userObj.email=null,this.userObj.password=null,this.userObj.role_id=null,this.userObj.role_name=null,this.dialog=!0},editRow:function(e){e.role_name.includes("ADMIN")?this.isVisibleControl=!1:this.isVisibleControl=!0,this.isCreate=!1,this.userObj.id=e.id,this.userObj.name=e.name,this.userObj.email=e.email,this.userObj.password=e.password,this.userObj.role_id=e.role_id,this.userObj.role_name=e.role_name,this.dialog=!0},saveCreate:function(){var e=this;this.$swal.fire({title:"Save User",text:"Are you sure?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(t){t.value&&(e.$store.dispatch("app/changeLoading",!0),e.$axios({method:"post",url:"/api/users/create",params:e.userObj}).then((function(t){e.userList=t.data,e.$swal.fire("Success","Successfully add User.","success"),e.dialog=!1,e.$store.dispatch("app/changeLoading",!1)})).catch((function(t){e.$swal.fire("Failed","Something went wrong. Please try again later.","error"),e.$store.dispatch("app/changeLoading",!1)})))}))},saveEdit:function(){var e=this;this.$swal.fire({title:"Save Update User",text:"Are you sure?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(t){t.value&&(e.$store.dispatch("app/changeLoading",!0),e.$axios({method:"put",url:"/api/users/update",params:e.userObj}).then((function(t){e.userList=t.data,e.$swal.fire("Success","Successfully Update User.","success"),e.dialog=!1,e.$store.dispatch("app/changeLoading",!1)})).catch((function(t){e.$swal.fire("Failed","Something went wrong. Please try again later.","error"),e.$store.dispatch("app/changeLoading",!1)})))}))},saveDelete:function(){var e=this;this.$swal.fire({title:"Delete User",text:"Are you sure?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(t){t.value&&(e.$store.dispatch("app/changeLoading",!0),e.$axios({method:"delete",url:"/api/users/delete",params:e.userObj}).then((function(t){e.userList=t.data,e.$swal.fire("Success","Successfully add User.","success"),e.dialog=!1,e.$store.dispatch("app/changeLoading",!1)})).catch((function(t){e.$swal.fire("Failed","Something went wrong. Please try again later.","error"),e.$store.dispatch("app/changeLoading",!1)})))}))}}},r=(s("dtNn"),s("KHd+")),i=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("div",{staticClass:"title"},[e._v("Users")])]),e._v(" "),s("v-col",{attrs:{cols:"6"}},[s("v-breadcrumbs",{staticClass:"indigo--text font-weight-black pa-0 pt-2 d-flex justify-end",attrs:{items:e.items},scopedSlots:e._u([{key:"divider",fn:function(){return[s("v-icon",[e._v("mdi-chevron-right")])]},proxy:!0}])})],1)],1),e._v(" "),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"elevation-1"},[s("v-card-title",{staticClass:"pa-2 ma-0"},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"8"}},[s("v-btn",{attrs:{color:"primary",small:""},on:{click:e.create}},[s("v-icon",[e._v("mdi-plus")]),e._v(" Add User")],1)],1),e._v(" "),s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{attrs:{outlined:"",dense:"",label:"Search","prepend-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),e._v(" "),s("v-card-text",[s("v-data-table",{staticClass:"ml-5 elevation-1",attrs:{search:e.search,items:e.userList,headers:e.headers},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[s("tr",{on:{click:function(t){return e.editRow(a)}}},[s("td",{staticClass:"subtitle-2 text-left"},[e._v(e._s(a.name))]),e._v(" "),s("td",{staticClass:"subtitle-2 text-left"},[e._v(e._s(a.email))]),e._v(" "),s("td",{staticClass:"subtitle-2 text-left"},[e._v(e._s(a.password.substring(1,10)+".."))]),e._v(" "),s("td",{staticClass:"subtitle-2 text-left"},[e._v(e._s(a.role_name))]),e._v(" "),s("td",{staticClass:"subtitle-2 text-left"},[e._v(e._s(e.moment(a.created_at).format("YYYY-MM-DD")))])])]}}])})],1)],1)],1)],1),e._v(" "),s("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[e.isCreate?s("v-card-title",{staticClass:"headline purple lighten-2",attrs:{"primary-title":""}},[e._v("\r\n                Add User\r\n                ")]):s("v-card-title",{staticClass:"headline purple lighten-2",attrs:{"primary-title":""}},[e._v("\r\n                Update User\r\n                ")]),e._v(" "),s("v-card-text",{staticClass:"pt-5 pr-5 pl-5 pb-0"},[s("v-form",{model:{value:e.isFormValid,callback:function(t){e.isFormValid=t},expression:"isFormValid"}},[s("v-text-field",{attrs:{outlined:"",dense:"",label:"Name",rules:[e.rules.required]},model:{value:e.userObj.name,callback:function(t){e.$set(e.userObj,"name",t)},expression:"userObj.name"}}),e._v(" "),s("v-text-field",{attrs:{outlined:"",dense:"",label:"Email Address",type:"email",rules:[e.rules.required,e.rules.email]},model:{value:e.userObj.email,callback:function(t){e.$set(e.userObj,"email",t)},expression:"userObj.email"}}),e._v(" "),s("v-text-field",{attrs:{outlined:"",dense:"",label:"Password",type:"password",rules:[e.rules.required]},model:{value:e.userObj.password,callback:function(t){e.$set(e.userObj,"password",t)},expression:"userObj.password"}}),e._v(" "),s("v-select",{attrs:{items:e.roleList,"item-text":"name","item-value":"id",label:"Role",rules:[e.rules.required],outlined:"",dense:""},model:{value:e.userObj.role_id,callback:function(t){e.$set(e.userObj,"role_id",t)},expression:"userObj.role_id"}})],1)],1),e._v(" "),s("v-divider"),e._v(" "),s("v-card-actions",[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:!1===e.isCreate&&e.isVisibleControl,expression:"isCreate === false && isVisibleControl"}],attrs:{color:"red",small:""},on:{click:function(t){return e.saveDelete()}}},[e._v("Delete")]),e._v(" "),s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"grey",small:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),e._v(" "),e.isCreate?s("v-btn",{attrs:{color:"green",small:"",disabled:!(e.isFormValid&&e.userObj.name&&e.userObj.email&&e.userObj.password&&e.userObj.role_id)},on:{click:function(t){return e.saveCreate()}}},[e._v("Save")]):s("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isVisibleControl,expression:"isVisibleControl"}],attrs:{color:"indigo",small:"",disabled:!(e.isFormValid&&e.userObj.name&&e.userObj.email&&e.userObj.password&&e.userObj.role_id)},on:{click:function(t){return e.saveEdit()}}},[e._v("Update")])],1)],1)],1)],1)}),[],!1,null,"374221a9",null);t.default=i.exports},"KHd+":function(e,t,s){"use strict";function a(e,t,s,a,r,i,n,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=s,c._compiled=!0),a&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):r&&(l=o?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}s.d(t,"a",(function(){return a}))},dtNn:function(e,t,s){"use strict";var a=s("k4Dq");s.n(a).a},k4Dq:function(e,t,s){var a=s("xYah");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,r);a.locals&&(e.exports=a.locals)},xYah:function(e,t,s){(e.exports=s("I1BE")(!1)).push([e.i,"\n.row-clickable[data-v-374221a9]{\r\n    cursor: pointer !important;\n}\r\n",""])}}]);